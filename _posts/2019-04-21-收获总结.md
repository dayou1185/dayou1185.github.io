---
layout:     post
title:      2019-04-21 收获 总结
subtitle:  系统学习汇编的第四天
date:       2019-04-21
author:     DaYou
header-img: img/post-bg-cook.jpg
catalog: true
---
## 各种运算符的优先级
![](https://wx2.sinaimg.cn/mw1024/0079f8Holy1g2ao79o7ekj30g308pgn4.jpg)
## 程序的段结构

### 1.段定义伪指令
伪指令SEGMENT和ENDS用于定义一个逻辑段。使用时必须配对，分别表示定义的开始与结束。一般格式：
```
段名 SEGMENT [定位类型][组合类型][‘类型名’]
.....
.....
.....
段名 ENDS
```
1. 段名。由用户任意定义。段首和段尾相同。
2. 定位类型。用于决定段的起始边界，即第一个可存放数据的位置。它可能有四种取值，包括PAGE(表示该段从一个页面开始)、PARA(表示该段从一个小节的边界开始，默认为PARA)、WORD(表示该段从一个偶数字节地址开始、段起始单元地址的最后一位二进制数一定是0)、BYTE(表示该段的起始单元地址可以是任一地址值)
3. 组合类型。用来指定段与段之间的连接关系和定位。有六种取值选择：未指定组合类型(表示本段与其他段无连接关系)、PUBLIC(与段同名的段邻接在一起，形成一个新的逻辑段，共用一个段基址)、COMMON(产生一个覆盖段，与同名的置成相同的段基址，共享同一存储区，长度由最大的段确定)、STACK(将所有同名段连接成一个连续段，且系统在自动对SS段寄存器进行初始化为该连续段的段基址，并初始化堆栈指针SP)、AT表达式表示本段可定位在表达式所指示的小节的边界上)、MEMORY(表示本段在存储器中应定位在所有其他段之上的最高地址上)
4. 类型名。类型名为某一段或几个相同类型段设定的类型名称。类别相同的段放在相邻的存储区，必须用单引号引起来。

这三个参数可有可无，顺序不可改变，段名必须有。在进行程序设计时，一般三个段就可以。

### 2.段寻址伪指令
段寻址伪指令ASSUME的作用是告诉汇编程序，在处理源程序时，定义的段与哪个寄存器有关。一般格式：
```
ASSUME 段寄存器名：段名，段寄存器名：段名....
```
其中，段寄存器名为CS,DS,ES,和SS四个之一，段名是用SEGMENT/ENDS伪指令定义的段名。一条ASSUME语句不一定设置全部段寄存器，可以使用NOTHING将前面的设置删除。如：
```
ASSUME ES:NOTHING;删除前面对ES与某个定义段的关联
ASSUME NOTHING；删除全部4个寄存器的设置
```


### 3.段寄存器的装入

段寄存器的初值装入需要用程序的方法来实现。四个寄存器的装入方法略有不同。
1. DS和ES的装入
```
MOV AX ,DATA1
MOV DS,AX
MOV AX ,DATA2
MOV ES,AX
```
2. SS的装入
SS的装入有两种方法：(1)在段定义伪指令的组合类型项中，使用STACK参数，并在段寻址指令ASSUME语句中把该段与SS段寄存器关联。(2)如果在段定义伪指令的组合类型，未使用STACK参数，或者是在程序中要调换到另一个堆栈中，这时，可以使用类似于DS和ES的装入方法。
3. CS装入。CPU在执行指令之前根据CS和IP的内容来从内存中提取指令，即必须在程序执行之前装入CS和IP的值。因此，CS和IP的初始值就不能用可执行语句来装入。装入CS和IP一般有下面两种情况。(1)由系统按照结束伪指令指定的地址装入初始的CS和IP其格式为：
```
END 起始地址（一个标号或表达式）
```
(2)在程序运行期间，当执行某些指令时，CPU自动修改CS和IP，使它们指向新的代码段。